/*! jqSelect - v0.0.1 - 2020-04-05
* Copyright (c) 2020 Moneyfly; Licensed MIT */

"use strict";!function(l){l.fn.jqSelect=function(t){return t=l.extend({version:"1.0"},t),this.each(function(){if("SELECT"==this.tagName||"INPUT"===this.tagName&&"text"===this.getAttribute("type")&&this.hasAttribute("datalist")){var t=l(this),n=h(t),i=l("<span>").addClass("jqselect-wrapper options").insertAfter(t);t.hide();var a=t.val(),e=l("<input>").appendTo(i).val(a).addClass("jqselect-input");e.on("keyup",function(){u(c(l(this).val(),n),s,e,t),s.show()}).on("input",function(){p(t,e.val())});var s=l("<ul>").appendTo(i).addClass("options-box");l(document).mouseup(function(t){s.is(t.target)||0!==s.has(t.target).length||s.hide()});var r=l("<a>").appendTo(i).attr("tabIndex",-1).addClass("jqselect-dropbutton"),o=!1;r.on("mousedown",function(){o=s.is(":visible")}).on("click",function(){e.trigger("focus"),o?s.hide():(u(c("",n),s,e,t),s.show())})}})};var u=function(t,n,i,a){n.html("");for(var e=0;e<t.length;e++)l("<li>").appendTo(n).html(t[e].text).attr("val",t[e].val).addClass("options-item").on("click",function(){i.val(l(this).attr("val")).trigger("input"),n.hide()})},p=function(t,n){t.val(n)},c=function(i,t){return i=i.replace(/ /g,""),t.map(function(){if(""==i)return{text:this,val:this};var t=new RegExp(i,"gi"),n=this.replace(t,function(t){return'<span class="options-highlight">'+t+"</span>"});return n!=this?{text:n,val:this}:null}).filter(function(){return null!=this})},h=function(t){if("SELECT"==t.prop("tagName"))var n=t;else if("INPUT"==t.prop("tagName")&&null!=t.attr("datalist"))n=l("#"+l(t).attr("datalist").trim());return n.children("option").map(function(){return l(this).val()})}}(jQuery);