/*! jqSelect - v0.0.1 - 2021-02-21
* https://github.com/moneyfly/jqSelect
* Copyright (c) 2021 Moneyfly; Licensed MIT */

"use strict";!function(o){o.fn.jqSelect=function(t){return t=o.extend({version:"1.0"},t),this.each(function(){if("SELECT"==this.tagName||"INPUT"===this.tagName&&"text"===this.getAttribute("type")&&this.hasAttribute("datalist")){var t=o(this);t.on("change",function(){e.val(t.val())});var a=p(t),n=o("<span>").addClass("jqselect-wrapper options").insertAfter(t);t.hide();var i=t.val(),e=o("<input>").appendTo(n).val(i).addClass("jqselect-input");"SELECT"===this.tagName&&e.attr("disabled",!0),e.on("keyup",function(){u(h(o(this).val(),a),r,e,t),r.show()}).on("input",function(){c(t,e.val())});var r=o("<ul>").appendTo(n).addClass("options-box");o(document).mouseup(function(t){r.is(t.target)||0!==r.has(t.target).length||r.hide()});var s=o("<a>").appendTo(n).attr("tabIndex",-1).addClass("jqselect-dropbutton"),l=!1;s.on("mousedown",function(){l=r.is(":visible")}).on("click",function(){e.trigger("focus"),l?r.hide():(u(h("",a),r,e,t),r.show())})}})};var u=function(t,a,n,i){a.html("");for(var e=0;e<t.length;e++)o("<li>").appendTo(a).html(t[e].text).attr("val",t[e].val).addClass("options-item").on("click",function(){n.val(o(this).attr("val")).trigger("input"),a.hide()})},c=function(t,a){t.val(a).trigger("change")},h=function(n,t){return n=n.replace(/ /g,""),t.map(function(){if(""==n)return{text:this.text,val:this.val};var t=new RegExp(n,"gi"),a=this.val.replace(t,function(t){return'<span class="options-highlight">'+t+"</span>"});return a!=this.val?{text:a,val:this.val}:null}).filter(function(){return null!=this})},p=function(t){if("SELECT"==t.prop("tagName"))var a=t;else if("INPUT"==t.prop("tagName")&&null!=t.attr("datalist"))a=o("#"+o(t).attr("datalist").trim());return a.children("option").map(function(){var t=o(this).val();return{text:o(this).text().trim()||t,val:t}})}}(jQuery);