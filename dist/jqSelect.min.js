/*! jqSelect - v0.0.1 - 2021-09-15
* https://github.com/moneyfly/jqSelect
* Copyright (c) 2021 Moneyfly; Licensed MIT */

"use strict";!function(c){c.fn.jqSelect=function(p){p=c.extend({version:"1.0"},p);return this.each(function(t){if("SELECT"==this.tagName||"INPUT"===this.tagName&&"text"===this.getAttribute("type")&&this.hasAttribute("datalist")){var a=c(this);a.on("change",function(){s.val(a.val())});var n=f(a),e="jqselect-wrapper options ";null!=p.wrapper_class&&(e+=p.wrapper_class);var i=c("<span>").addClass(e).insertAfter(a);a.hide();var r=a.val(),s=c("<input>").appendTo(i).val(r).addClass("jqselect-input");"SELECT"===this.tagName&&s.attr("disabled",!0),a.attr("readonly")&&s.attr("readonly",!0),s.on("keyup",function(){h(d(c(this).val(),n),l,s,a),l.show()}).on("input",function(){v(a,s.val())});var l=c("<ul>").appendTo(i).addClass("options-box");c(document).mouseup(function(t){l.is(t.target)||0!==l.has(t.target).length||l.hide()});var o=c("<a>").appendTo(i).attr("tabIndex",-1).addClass("jqselect-dropbutton"),u=!1;o.on("mousedown",function(){u=l.is(":visible")}).on("click",function(){s.trigger("focus"),u?l.hide():(h(d("",n),l,s,a,p.options_class||""),l.show())})}})};var h=function(t,a,n,e,i){a.html("");for(var r=0;r<t.length;r++){var s="options-item "+i+" options-"+t[r].val.replace(" ","").toLowerCase();c("<li>").appendTo(a).html(t[r].text).attr("val",t[r].val).addClass(s).on("click",function(){n.val(c(this).attr("val")).trigger("input"),a.hide()})}},v=function(t,a){t.val(a).trigger("change")},d=function(n,t){return n=n.replace(/ /g,""),t.map(function(){if(""==n)return{text:this.text,val:this.val};var t=new RegExp(n,"gi"),a=this.val.replace(t,function(t){return'<span class="options-highlight">'+t+"</span>"});return a!=this.val?{text:a,val:this.val}:null}).filter(function(){return null!=this})},f=function(t){if("SELECT"==t.prop("tagName"))var a=t;else if("INPUT"==t.prop("tagName")&&null!=t.attr("datalist"))a=c("#"+c(t).attr("datalist").trim());return a.children("option").map(function(){var t=c(this).val();return{text:c(this).text().trim()||t,val:t}})}}(jQuery);