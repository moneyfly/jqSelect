/*! jqSelect - v0.0.1 - 2020-04-05
* Copyright (c) 2020 Moneyfly; Licensed MIT */

"use strict";!function(o){o.fn.jqSelect=function(t){return t=o.extend({version:"1.0"},t),this.each(function(){if("SELECT"==this.tagName||"INPUT"===this.tagName&&"text"===this.getAttribute("type")&&this.hasAttribute("datalist")){var t=o(this);t.on("change",function(){e.val(t.val())});var n=p(t),a=o("<span>").addClass("jqselect-wrapper options").insertAfter(t);t.hide();var i=t.val(),e=o("<input>").appendTo(a).val(i).addClass("jqselect-input");e.on("keyup",function(){u(h(o(this).val(),n),r,e,t),r.show()}).on("input",function(){c(t,e.val())});var r=o("<ul>").appendTo(a).addClass("options-box");o(document).mouseup(function(t){r.is(t.target)||0!==r.has(t.target).length||r.hide()});var s=o("<a>").appendTo(a).attr("tabIndex",-1).addClass("jqselect-dropbutton"),l=!1;s.on("mousedown",function(){l=r.is(":visible")}).on("click",function(){e.trigger("focus"),l?r.hide():(u(h("",n),r,e,t),r.show())})}})};var u=function(t,n,a,i){n.html("");for(var e=0;e<t.length;e++)o("<li>").appendTo(n).html(t[e].text).attr("val",t[e].val).addClass("options-item").on("click",function(){a.val(o(this).attr("val")).trigger("input"),n.hide()})},c=function(t,n){t.val(n).trigger("change")},h=function(a,t){return a=a.replace(/ /g,""),t.map(function(){if(""==a)return{text:this.text,val:this.val};var t=new RegExp(a,"gi"),n=this.val.replace(t,function(t){return'<span class="options-highlight">'+t+"</span>"});return n!=this.val?{text:n,val:this.val}:null}).filter(function(){return null!=this})},p=function(t){if("SELECT"==t.prop("tagName"))var n=t;else if("INPUT"==t.prop("tagName")&&null!=t.attr("datalist"))n=o("#"+o(t).attr("datalist").trim());return n.children("option").map(function(){var t=o(this).val();return{text:o(this).text().trim()||t,val:t}})}}(jQuery);